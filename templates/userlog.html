<!DOCTYPE html>
<html lang="en">
<head>
    <title>VineGuard - Grape Disease Detection & Smart Farming</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Bootstrap 4 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <!-- Tailwind CSS -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <!-- Google Fonts (Poppins & Playfair Display) -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- AOS for Animations -->
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.4/dist/aos.css" />
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background: #f5f6f2;
            color: #1a2e35;
            font-size: 1rem;
            min-height: 100vh;
            margin: 0;
            overflow-x: hidden;
        }

        /* Intro Banner with Parallax */
        .intro-banner {
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            background: url('https://images.unsplash.com/photo-1537640538966-79f369143f8f?q=80&w=1920&auto=format&fit=crop') no-repeat center/cover;
            background-attachment: fixed;
            position: relative;
        }

        .intro-banner::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, rgba(26, 46, 53, 0.55), rgba(0, 0, 0, 0.65));
        }

        .intro-banner h1 {
            font-family: 'Playfair Display', serif;
            font-size: 5.5rem;
            font-weight: 700;
            color: #f9e4b7;
            z-index: 1;
            text-shadow: 0 5px 10px rgba(0, 0, 0, 0.6);
            letter-spacing: 1px;
        }

        .intro-banner p {
            font-family: 'Poppins', sans-serif;
            font-size: 1.8rem;
            color: #e0e0e0;
            z-index: 1;
            max-width: 750px;
            margin: 2rem auto;
        }

        /* Navbar */
        .navbar {
            background: linear-gradient(90deg, #1a2e35 0%, #2a4a3f 100%);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.35);
            padding: 1.8rem 0;
            transition: background 0.5s ease;
        }

        .navbar-brand, .navbar-nav .nav-link {
            color: #f9e4b7 !important;
            font-family: 'Poppins', sans-serif;
            font-weight: 500;
            font-size: 1.3rem;
            text-transform: uppercase;
            letter-spacing: 1.2px;
            transition: color 0.4s ease, transform 0.4s ease;
        }

        .navbar-nav .nav-link:hover {
            color: #f1c40f !important;
            transform: translateY(-4px);
        }

        .navbar-brand {
            font-family: 'Playfair Display', serif;
            font-size: 2.2rem;
            padding: 0 2.2rem;
        }

        .navbar-brand::before {
            content: 'üçá';
            margin-right: 18px;
            font-size: 1.8rem;
            animation: pulse 2.8s infinite ease-in-out;
        }

        /* Carousel */
        .carousel-inner img, .carousel-inner video {
            height: 650px;
            object-fit: cover;
            width: 100%;
            border-radius: 24px;
            transition: transform 0.7s ease, filter 0.7s ease;
        }

        .carousel-inner img:hover, .carousel-inner video:hover {
            transform: scale(1.1);
            filter: brightness(1.25);
        }

        .carousel-item video {
            display: block;
        }

        /* Disease Cards */
        .disease-section {
            padding: 100px 0;
            background: #f5f6f2;
        }

        .disease-section h2 {
            font-family: 'Playfair Display', serif;
            font-size: 4rem;
            font-weight: 700;
            color: #1a2e35;
            text-align: center;
            margin-bottom: 4rem;
        }

        .disease-grid {
            display: flex;
            flex-wrap: nowrap;
            gap: 30px;
            justify-content: center;
            overflow-x: auto;
            padding-bottom: 1.5rem;
        }

        .disease-card {
            background: #ffffff;
            border-radius: 24px;
            overflow: hidden;
            width: 340px;
            flex: 0 0 auto;
            transition: transform 0.6s ease, box-shadow 0.6s ease;
            box-shadow: 0 10px 24px rgba(0, 0, 0, 0.18);
        }

        .disease-card:hover {
            transform: translateY(-15px);
            box-shadow: 0 14px 34px rgba(0, 0, 0, 0.3);
        }

        .disease-card img {
            width: 100%;
            height: 240px;
            object-fit: cover;
            transition: transform 0.6s ease;
        }

        .disease-card:hover img {
            transform: scale(1.12);
        }

        .disease-card h3 {
            font-family: 'Playfair Display', serif;
            font-size: 1.9rem;
            font-weight: 600;
            color: #1a2e35;
            margin: 1.4rem 0 0.7rem;
            padding: 0 2rem;
        }

        .disease-card p {
            font-size: 1.05rem;
            color: #4b5e67;
            padding: 0 2rem 2rem;
        }

        /* Image Upload Section */
        .image-choose {
            width: 90%;
            max-width: 700px;
            margin: 7rem auto 5rem auto;
            padding: 3.5rem;
            background: #ffffff;
            border-radius: 24px;
            box-shadow: 0 10px 24px rgba(0, 0, 0, 0.18);
            text-align: center;
            transition: transform 0.6s ease, box-shadow 0.6s ease;
        }

        .image-choose:hover {
            transform: translateY(-10px);
            box-shadow: 0 14px 34px rgba(0, 0, 0, 0.3);
        }

        .image-choose h2 {
            font-family: 'Playfair Display', serif;
            font-size: 2.8rem;
            font-weight: 600;
            color: #1a2e35;
            margin-bottom: 2rem;
        }

        input[type="file"], input[type="submit"], button {
            width: 100%;
            max-width: 340px;
            padding: 1.2rem;
            margin: 0.7rem 0;
            border-radius: 12px;
            border: 1px solid #f1c40f;
            background: #f5f6f2;
            color: #1a2e35;
            font-family: 'Poppins', sans-serif;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.5s ease;
        }

        input[type="file"]:hover, input[type="submit"]:hover, button:hover:not(:disabled) {
            background: #f1c40f;
            color: #ffffff;
            box-shadow: 0 0 18px rgba(241, 196, 15, 0.6);
        }

        button:disabled {
            background: #cccccc;
            cursor: not-allowed;
        }

        video, img#preview {
            max-width: 100%;
            height: auto;
            border: 2px solid #1a2e35;
            border-radius: 12px;
            margin: 1rem 0;
        }

        #status, #imageUrl {
            font-size: 1.2rem;
            color: #4b5e67;
            margin: 1rem 0;
        }

        #imageUrl a {
            color: #f1c40f;
            text-decoration: none;
        }

        #imageUrl a:hover {
            text-decoration: underline;
        }

        /* Alert Styling */
        .alert-warning {
            background: #fef9e7;
            color: #92400e;
            border: 1px solid #fed7aa;
            border-radius: 14px;
            padding: 1.8rem;
            margin: 2.5rem auto;
            max-width: 700px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.18);
            font-size: 1.2rem;
        }

        .alert-warning .close {
            color: #92400e;
            opacity: 0.8;
            transition: opacity 0.4s ease;
        }

        .alert-warning .close:hover {
            opacity: 1;
        }

        /* Dashboard */
        .dashboard {
            padding: 100px 20px;
            text-align: center;
        }

        .dashboard h1 {
            font-family: 'Playfair Display', serif;
            font-size: 4rem;
            font-weight: 700;
            color: #1a2e35;
            margin-bottom: 3.5rem;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
            gap: 35px;
            max-width: 1400px;
            margin: auto;
        }

        .card {
            background: #ffffff;
            border-radius: 24px;
            padding: 40px;
            box-shadow: 0 10px 24px rgba(0, 0, 0, 0.18);
            transition: transform 0.6s ease, box-shadow 0.6s ease;
        }

        .card:hover {
            transform: translateY(-15px);
            box-shadow: 0 14px 34px rgba(0, 0, 0, 0.3);
        }

        .card h2 {
            font-family: 'Poppins', sans-serif;
            font-size: 1.7rem;
            font-weight: 600;
            color: #1a2e35;
        }

        .emoji {
            font-size: 55px;
            margin-bottom: 1.8rem;
        }

        .value {
            font-size: 2.8rem;
            font-weight: 600;
            color: #1a2e35;
        }

        .progress-container {
            width: 100%;
            background: #e5e7eb;
            border-radius: 12px;
            margin-top: 1.8rem;
            height: 26px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #f1c40f, #b7950b);
            border-radius: 12px;
            transition: width 0.8s ease-in-out;
        }

        /* Diagnosis Section */
        .diagnosis-section {
            padding: 100px 0;
            background: #f5f6f2;
        }

        .diagnosis-section h2 {
            font-family: 'Playfair Display', serif;
            font-size: 4rem;
            font-weight: 700;
            margin-bottom: 1.8rem;
            color: #1a2e35;
        }

        .diagnosis-section h3 {
            font-family: 'Poppins', sans-serif;
            font-size: 2.2rem;
            font-weight: 600;
            margin-bottom: 1.4rem;
            color: #1a2e35;
        }

        .diagnosis-section p {
            font-size: 1.3rem;
            margin-bottom: 3rem;
            color: #4b5e67;
        }

        .diagnosis-section .btn {
            background-color: #f1c40f;
            color: #ffffff;
            padding: 16px 30px;
            border-radius: 12px;
            font-size: 1.3rem;
            font-family: 'Poppins', sans-serif;
            transition: background-color 0.5s ease, transform 0.5s ease;
        }

        .diagnosis-section .btn:hover {
            background-color: #b7950b;
            transform: translateY(-5px);
        }

        .phone-video {
            max-width: 600px;
            margin: auto;
        }

        .phone-video video {
            width: 100%;
            height: auto;
            border-radius: 24px;
            box-shadow: 0 10px 24px rgba(0, 0, 0, 0.18);
            transition: transform 0.6s ease;
        }

        .phone-video video:hover {
            transform: scale(1.06);
        }

        /* Weather Section */
        .weather-section {
            padding: 100px 0;
            background: #f5f6f2;
        }

        .weather-section h2 {
            font-family: 'Playfair Display', serif;
            font-size: 4rem;
            font-weight: 700;
            color: #1a2e35;
            margin-bottom: 1.8rem;
        }

        .weather-section p {
            font-size: 1.3rem;
            margin-bottom: 3rem;
            color: #4b5e67;
        }

        .weather-video {
            max-width: 600px;
            margin: auto;
        }

        .weather-video video {
            width: 100%;
            height: auto;
            border-radius: 24px;
            box-shadow: 0 10px 24px rgba(0, 0, 0, 0.18);
            transition: transform 0.6s ease;
        }

        .weather-video video:hover {
            transform: scale(1.06);
        }

        /* Testimonials Section */
        .testimonials-section {
            padding: 100px 0;
            background: #1a2e35;
            color: #f9e4b7;
        }

        .testimonials-section h2 {
            font-family: 'Playfair Display', serif;
            font-size: 4rem;
            font-weight: 700;
            color: #f9e4b7;
            text-align: center;
            margin-bottom: 3.5rem;
        }

        .testimonial-card {
            background: #2a4a3f;
            border-radius: 24px;
            padding: 40px;
            box-shadow: 0 10px 24px rgba(0, 0, 0, 0.35);
            transition: transform 0.6s ease;
        }

        .testimonial-card:hover {
            transform: translateY(-15px);
        }

        .testimonial-card p {
            font-size: 1.2rem;
            color: #e0e0e0;
            margin-bottom: 1.8rem;
        }

        .testimonial-card h4 {
            font-family: 'Poppins', sans-serif;
            font-size: 1.5rem;
            font-weight: 600;
            color: #f1c40f;
        }

        /* Vineyard Management Tools Section */
        .tools-section {
            padding: 100px 0;
            background: #f5f6f2;
        }

        .tools-section h2 {
            font-family: 'Playfair Display', serif;
            font-size: 4rem;
            font-weight: 700;
            color: #1a2e35;
            text-align: center;
            margin-bottom: 3.5rem;
        }

        .tool-card {
            background: #ffffff;
            border-radius: 24px;
            padding: 40px;
            box-shadow: 0 10px 24px rgba(0, 0, 0, 0.18);
            transition: transform 0.6s ease, box-shadow 0.6s ease;
            text-align: center;
        }

        .tool-card:hover {
            transform: translateY(-15px);
            box-shadow: 0 14px 34px rgba(0, 0, 0, 0.3);
        }

        .tool-card i {
            font-size: 3rem;
            color: #f1c40f;
            margin-bottom: 1.4rem;
        }

        .tool-card h3 {
            font-family: 'Poppins', sans-serif;
            font-size: 1.8rem;
            font-weight: 600;
            color: #1a2e35;
            margin-bottom: 1.4rem;
        }

        .tool-card p {
            font-size: 1.05rem;
            color: #4b5e67;
        }

        /* Footer */
        .footer {
            padding: 60px 0;
            background: #1a2e35;
            color: #f9e4b7;
            text-align: center;
        }

        .footer p {
            font-size: 1.2rem;
            margin-bottom: 0.8rem;
        }

        .footer a {
            color: #f1c40f;
            text-decoration: none;
            transition: color 0.4s ease;
        }

        .footer a:hover {
            color: #e0e0e0;
        }

        /* Separator */
        .section-separator {
            height: 2px;
            background: linear-gradient(90deg, #f1c40f, #b7950b);
            margin: 0;
            width: 100%;
        }

        /* Animations */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.25); }
            100% { transform: scale(1); }
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .intro-banner {
                background-attachment: scroll;
            }

            .intro-banner h1 {
                font-size: 3.2rem;
            }

            .intro-banner p {
                font-size: 1.5rem;
            }

            .carousel-inner img, .carousel-inner video {
                height: 450px;
            }

            .dashboard h1, .testimonials-section h2, .tools-section h2, .disease-section h2 {
                font-size: 2.8rem;
            }

            .disease-grid {
                flex-wrap: wrap;
            }

            .disease-card {
                width: 90%;
                max-width: 380px;
            }

            .image-choose h2 {
                font-size: 2.2rem;
            }

            .diagnosis-section h2, .weather-section h2 {
                font-size: 2.8rem;
            }

            .diagnosis-section h3 {
                font-size: 1.8rem;
            }

            .diagnosis-section p, .weather-section p, .testimonial-card p, .tool-card p {
                font-size: 1.05rem;
            }

            .disease-card h3, .testimonial-card h4, .tool-card h3 {
                font-size: 1.6rem;
            }

            .disease-card p {
                font-size: 1rem;
            }

            input[type="file"], input[type="submit"], button {
                max-width: 300px;
                font-size: 1.1rem;
            }

            video, img#preview {
                max-width: 300px;
            }

            .alert-warning {
                font-size: 1.1rem;
            }

            .phone-video, .weather-video {
                max-width: 100%;
            }

            .footer p {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">VineGuard</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#myNavbar" aria-controls="myNavbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="myNavbar">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item"><a class="nav-link" href="graph.html">Insights</a></li>
                    <li class="nav-item"><a class="nav-link" href="#disease-detection">Diseases</a></li>
                    <li class="nav-item"><a class="nav-link" href="#main-content">Dashboard</a></li>
                    <li class="nav-item"><a class="nav-link" href="#tools">Tools</a></li>
                </ul>
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item"><a class="nav-link" href="/logout"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Intro Banner -->
    <section id="home" class="intro-banner" data-aos="fade-up">
        <div class="position-relative" style="z-index: 10;">
            <h1 class="text-center">Multimodal Smart Vineyard Protection</h1>
            <p class="text-center">Leverage advanced ML and IoT for real-time grape disease detection and vineyard optimization.</p>
            <p class="text-center"><a href="#main-content" class="btn btn-primary btn-lg" style="background-color: #f1c40f; color: #ffffff; border: none; transition: transform 0.5s ease;" onmouseover="this.style.transform='scale(1.08)'" onmouseout="this.style.transform='scale(1)'">Explore Now</a></p>
        </div>
    </section>

    <!-- Diagnosis Section -->
    <section class="diagnosis-section" data-aos="fade-up">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <h2>Enhance Your Vineyard Yield</h2>
                    <h3>Instant Crop Analysis</h3>
                    <p>Upload a photo of your grape leaves for ML-powered diagnostics and precise treatment recommendations in seconds.</p>
                    <a href="#main-content" class="btn">Start Free Analysis</a>
                </div>
                <div class="col-md-6">
                    <div class="phone-video">
                        <video autoplay loop muted playsinline>
                            <source src="https://plantix.net/en/assets/video/farmer-app-screen-1.mp4" type="video/mp4">
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Separator -->
    <div class="section-separator"></div>

    <!-- Weather Section -->
    <section class="weather-section" data-aos="fade-up">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-6 order-md-1">
                    <div class="weather-video">
                        <video autoplay loop muted playsinline>
                            <source src="/static/videos/Soil_Sensor_Data_Mobile_App.mp4" type="video/mp4">
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
                <div class="col-md-6 order-md-2">
                    <h2>Real-time Environmental Insights</h2>
                    <p>Monitor temperature, humidity, and soil moisture with live IoT data to optimize vineyard conditions and ensure healthy crops.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Separator -->
    <div class="section-separator"></div>

    <!-- Carousel Section -->
    <section class="py-5" style="background: #f5f6f2;" data-aos="fade-in">
        <div class="container">
            <h2 class="text-center" style="font-family: 'Playfair Display', serif;">Vineyard Gallery</h2>
            <div id="vineyardCarousel" class="carousel slide" data-ride="carousel">
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img src="https://media.istockphoto.com/id/1170442845/photo/young-indian-farmer-at-cotton-field-india.jpg?s=612x612&w=0&k=20&c=31XbgSAuzygJQUYyXJB0yXVZvB78PsCLbjB-NCSHYWA=" alt="Healthy Vineyard" class="img-fluid">
                    </div>
                    <div class="carousel-item">
                        <video controls>
                            <source src="https://media.istockphoto.com/id/2161017637/video/farmer-with-tractor-spraying-grapevines-in-vineyard.mp4?s=mp4-640x640-is&k=20&c=aEqlOpU_5v0XC8tbawG987v02ex0mu-4qxyf7i03KGw=" type="video/mp4">
                            Your browser does not support the video tag.
                        </video>
                    </div>
                    <div class="carousel-item">
                        <img src="https://cdn.pixabay.com/photo/2024/03/01/19/04/ai-generated-8607057_1280.jpg" alt="Grape Harvest" class="img-fluid">
                    </div>
                </div>
                <a class="carousel-control-prev" href="#vineyardCarousel" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#vineyardCarousel" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </div>
    </section>

    <!-- Disease Detection Section -->
    <section id="disease-detection" class="disease-section" data-aos="zoom-in">
        <div class="container">
            <h2>Grape Vineyard Diseases</h2>
            <div class="disease-grid">
                <div class="disease-card" data-aos="fade-right" data-aos-delay="100">
                    <img src="https://thumbs.dreamstime.com/b/detail-damaged-grapevine-leaf-fruit-plant-disease-sick-vine-grape-leaves-infected-mildew-fungal-affected-petri-esca-233161702.jpg" alt="Powdery Mildew" class="img-fluid">
                    <div class="p-4">
                        <h3>Powdery Mildew</h3>
                        <p>A fungal disease with white powdery spots on leaves and fruit, thriving in warm, dry conditions.</p>
                    </div>
                </div>
                <div class="disease-card" data-aos="fade-up" data-aos-delay="200">
                    <img src="https://media.istockphoto.com/id/1339644981/photo/green-grape-leaf-with-mite-infestation.jpg?s=612x612&w=0&k=20&c=WNIBBXSxT8xJRTRmcyoWv9ttwZzxTmSuS3CZ45068cM=" alt="Leaf Blight" class="img-fluid">
                    <div class="p-4">
                        <h3>Leaf Blight</h3>
                        <p>Shows yellowish spots and white downy growth, prevalent in cool, wet weather.</p>
                    </div>
                </div>
                <div class="disease-card" data-aos="fade-left" data-aos-delay="300">
                    <img src="https://kentuckypestnews.wordpress.com/wp-content/uploads/2016/07/black-rot-of-grape_figure-1.jpg" alt="Black Rot" class="img-fluid">
                    <div class="p-4">
                        <h3>Black Rot</h3>
                        <p>Causes brown lesions and shriveled black berries, spreading rapidly in humid conditions.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Testimonials Section -->
    <section class="testimonials-section" data-aos="fade-up">
        <div class="container">
            <h2>What Our Users Say</h2>
            <div class="row">
                <div class="col-md-4" data-aos="fade-right" data-aos-delay="100">
                    <div class="testimonial-card">
                        <p>"This platform revolutionized my vineyard management. The ML diagnostics are precise, and IoT data is invaluable."</p>
                        <h4>Prajwal, Vineyard Owner</h4>
                    </div>
                </div>
                <div class="col-md-4" data-aos="fade-up" data-aos-delay="200">
                    <div class="testimonial-card">
                        <p>"The intuitive dashboard and real-time IoT insights have streamlined my farming decisions."</p>
                        <h4>Sangamesh, Farmer</h4>
                    </div>
                </div>
                <div class="col-md-4" data-aos="fade-left" data-aos-delay="300">
                    <div class="testimonial-card">
                        <p>"Fast, reliable, and elegant. This tool has significantly boosted our crop yield. i have completly satisyfied with this app"</p>
                        <h4>Krishna, Agronomist</h4>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Vineyard Management Tools Section -->
    <section id="tools" class="tools-section" data-aos="fade-up">
        <div class="container">
            <h2>Vineyard Management Tools</h2>
            <div class="row">
                <div class="col-md-4" data-aos="fade-right" data-aos-delay="100">
                    <div class="tool-card">
                        <i class="fas fa-leaf"></i>
                        <h3>ML Disease Detection</h3>
                        <p>Advanced ML models deliver instant, accurate diagnostics for vineyard diseases.</p>
                    </div>
                </div>
                <div class="col-md-4" data-aos="fade-up" data-aos-delay="200">
                    <div class="tool-card">
                        <i class="fas fa-tint"></i>
                        <h3>IoT Sensor Integration</h3>
                        <p>Real-time monitoring of environmental conditions with IoT sensors.</p>
                    </div>
                </div>
                <div class="col-md-4" data-aos="fade-left" data-aos-delay="300">
                    <div class="tool-card">
                        <i class="fas fa-seedling"></i>
                        <h3>Predictive Analytics</h3>
                        <p>Data-driven insights to optimize irrigation, fertilization, and pest control.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Separator -->
    <div class="section-separator"></div>

    <!-- Main Content Section -->
    <section id="main-content">
        <!-- Image Upload and Camera Capture -->
        <div class="image-choose" data-aos="fade-up">
            <h2>Analyze Your Grape Leaf</h2>
            <p>Capture or upload an image of your grape leaf for disease detection.</p>
            <video id="video" autoplay playsinline style="display: none;"></video>
            <canvas id="canvas" style="display: none;"></canvas>
            <img id="preview" alt="Captured Image" style="display: none;">
            <button id="captureBtn">Capture Image with Camera</button>
            <button id="uploadBtn" disabled>Upload to Cloud & Analyze</button>
            <p id="status"></p>
            <p id="imageUrl"></p>
            <form id="fileForm" action="/image" method="POST" enctype="multipart/form-data" style="display: flex; flex-direction: column; align-items: center;" target="_blank">
                <input type="file" id="file" name="filename" accept="image/*" aria-label="Upload grape leaf image">
                <input type="submit" value="Analyse Uploaded Image" aria-label="Analyse uploaded image">
            </form>
            <form id="cameraForm" action="/image" method="POST" enctype="multipart/form-data" style="display: none;" target="_blank">
                <input type="hidden" id="cloudUrlInput" name="cloud_url">
                <input type="file" name="filename" id="cameraFileInput">
            </form>
        </div>

        <!-- Alert -->
        <div class="container">
            {% if msg %}
            <div class="alert alert-warning alert-dismissible" data-aos="fade-up">
                <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <strong>Warning!</strong> {{msg}}
            </div>
            {% endif %}
        </div>

        <!-- Smart Farming Dashboard -->
        <div class="dashboard" data-aos="fade-up" data-aos-delay="200">
            <h1>üå¶ Real-time Smart Farming Dashboard</h1>
            <div class="grid">
                <div class="card" data-aos="fade-right" data-aos-delay="100">
                    <div class="emoji">üå°</div>
                    <h2>Temperature</h2>
                    <div id="temp" class="value">-- ¬∞C</div>
                </div>
                <div class="card" data-aos="fade-up" data-aos-delay="200">
                    <div class="emoji">üíß</div>
                    <h2>Humidity</h2>
                    <div id="hum" class="value">-- %</div>
                </div>
                <div class="card" data-aos="fade-left" data-aos-delay="300">
                    <div class="emoji">üå±</div>
                    <h2>Soil Moisture</h2>
                    <div id="soil" class="value">-- %</div>
                    <div class="progress-container">
                        <div id="soilBar" class="progress-bar"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <p>&copy; 2025 VineGuard - Multimodal Smart Vineyard Protection. All rights reserved.</p>
        <p>Contact: <a href="tel:+919606397090">+91 9606397090</a></p>
        <p>Email: <a href="mailto:diggaviprajwal55@gmail.com">diggaviprajwal55@gmail.com</a></p>
        <p>Location: Bijapur, India</p>
    </footer>

    <!-- Scripts -->
    <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
    <script>
        // ImgBB API key (replace with your own)
        const IMGBB_API_KEY = '850c70cf1bf9468e892a326aa9fca270';

        // Initialize AOS
        AOS.init({
            duration: 1600,
            once: true,
            easing: 'ease-out'
        });

        // Smooth Scroll
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    window.scrollTo({
                        top: target.offsetTop,
                        behavior: 'smooth'
                    });
                }
            });
        });

        // Carousel Video Playback Handling
        const carousel = document.getElementById('vineyardCarousel');
        carousel.addEventListener('slide.bs.carousel', function (e) {
            const videos = document.querySelectorAll('.carousel-item video');
            videos.forEach(video => {
                video.pause();
                video.currentTime = 0;
            });
        });

        // Fetch Dashboard Data
        async function fetchData() {
            try {
                const response = await fetch("/data");
                const data = await response.json();
                document.getElementById("temp").innerText = data.temperature ? `${data.temperature} ¬∞C` : "-- ¬∞C";
                document.getElementById("hum").innerText = data.humidity ? `${data.humidity} %` : "-- %";
                if (data.soil !== null && data.soil !== undefined) {
                    document.getElementById("soil").innerText = `${data.soil} %`;
                    document.getElementById("soilBar").style.width = `${data.soil}%`;
                } else {
                    document.getElementById("soil").innerText = "-- %";
                    document.getElementById("soilBar").style.width = "0%";
                }
            } catch (error) {
                console.error("Error fetching data:", error);
            }
        }

        setInterval(fetchData, 2000);
        fetchData();

        // Camera Capture and ImgBB Upload
        const video = document.getElementById('video');
        const canvas = document.getElementById('canvas');
        const preview = document.getElementById('preview');
        const captureBtn = document.getElementById('captureBtn');
        const uploadBtn = document.getElementById('uploadBtn');
        const status = document.getElementById('status');
        const imageUrl = document.getElementById('imageUrl');
        const cameraForm = document.getElementById('cameraForm');
        const cloudUrlInput = document.getElementById('cloudUrlInput');
        const cameraFileInput = document.getElementById('cameraFileInput');

        // Access camera
        captureBtn.addEventListener('click', () => {
            if (video.style.display === 'none') {
                navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } })
                    .then(stream => {
                        video.srcObject = stream;
                        video.style.display = 'block';
                        captureBtn.textContent = 'Capture Image';
                    })
                    .catch(err => {
                        status.textContent = 'Error accessing camera: ' + err.message;
                    });
            } else {
                const context = canvas.getContext('2d');
                canvas.width = video.videoWidth;
                canvas.height = video.videoHeight;
                context.drawImage(video, 0, 0, canvas.width, canvas.height);
                preview.src = canvas.toDataURL('image/jpeg', 0.8);
                preview.style.display = 'block';
                video.style.display = 'none';
                captureBtn.textContent = 'Restart Camera';
                uploadBtn.disabled = false;
                status.textContent = 'Image captured! Click "Upload to Cloud & Analyze" to save and analyze.';
                // Stop camera stream
                video.srcObject.getTracks().forEach(track => track.stop());
            }
        });

        // Upload to ImgBB and submit to backend
        uploadBtn.addEventListener('click', () => {
            status.textContent = 'Uploading to ImgBB...';
            const imageData = canvas.toDataURL('image/jpeg', 0.8);
            const formData = new FormData();
            formData.append('image', imageData.split(',')[1]);
            formData.append('key', IMGBB_API_KEY);
            formData.append('name', `grape_leaf_${Date.now()}`);

            fetch('https://api.imgbb.com/1/upload', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    status.textContent = 'Image uploaded to ImgBB!';
                    const url = data.data.url;
                    imageUrl.innerHTML = `Cloud URL: <a href="${url}" target="_blank">${url}</a>`;
                    uploadBtn.disabled = true;
                    // Prepare form for backend analysis
                    const blob = dataURLtoBlob(imageData);
                    const file = new File([blob], `grape_leaf_${Date.now()}.jpg`, { type: 'image/jpeg' });
                    const dataTransfer = new DataTransfer();
                    dataTransfer.items.add(file);
                    cameraFileInput.files = dataTransfer.files;
                    cloudUrlInput.value = url;
                    // Submit the form to open results in new tab
                    cameraForm.submit();
                } else {
                    status.textContent = 'Upload failed: ' + data.error.message;
                }
            })
            .catch(err => {
                status.textContent = 'Upload failed: ' + err.message;
            });
        });

        // Convert data URL to Blob
        function dataURLtoBlob(dataURL) {
            const [header, data] = dataURL.split(',');
            const mime = header.match(/:(.*?);/)[1];
            const binary = atob(data);
            const array = [];
            for (let i = 0; i < binary.length; i++) {
                array.push(binary.charCodeAt(i));
            }
            return new Blob([new Uint8Array(array)], { type: mime });
        }
    </script>
</body>
</html>